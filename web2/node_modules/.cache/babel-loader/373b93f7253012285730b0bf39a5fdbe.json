{"remainingRequest":"/Users/lx/go/src/github.com/ansible-semaphore/semaphore/web2/node_modules/thread-loader/dist/cjs.js!/Users/lx/go/src/github.com/ansible-semaphore/semaphore/web2/node_modules/babel-loader/lib/index.js!/Users/lx/go/src/github.com/ansible-semaphore/semaphore/web2/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/lx/go/src/github.com/ansible-semaphore/semaphore/web2/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/lx/go/src/github.com/ansible-semaphore/semaphore/web2/src/views/project/Team.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/lx/go/src/github.com/ansible-semaphore/semaphore/web2/src/views/project/Team.vue","mtime":1639028924775},{"path":"/Users/lx/go/src/github.com/ansible-semaphore/semaphore/web2/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/lx/go/src/github.com/ansible-semaphore/semaphore/web2/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/lx/go/src/github.com/ansible-semaphore/semaphore/web2/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/lx/go/src/github.com/ansible-semaphore/semaphore/web2/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/lx/go/src/github.com/ansible-semaphore/semaphore/web2/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuY29uY2F0IjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmluZCI7CmltcG9ydCAicmVnZW5lcmF0b3ItcnVudGltZS9ydW50aW1lIjsKaW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIi9Vc2Vycy9seC9nby9zcmMvZ2l0aHViLmNvbS9hbnNpYmxlLXNlbWFwaG9yZS9zZW1hcGhvcmUvd2ViMi9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vYXN5bmNUb0dlbmVyYXRvciI7Ci8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCmltcG9ydCBJdGVtTGlzdFBhZ2VCYXNlIGZyb20gJ0AvY29tcG9uZW50cy9JdGVtTGlzdFBhZ2VCYXNlJzsKaW1wb3J0IFRlYW1NZW1iZXJGb3JtIGZyb20gJ0AvY29tcG9uZW50cy9UZWFtTWVtYmVyRm9ybS52dWUnOwppbXBvcnQgYXhpb3MgZnJvbSAnYXhpb3MnOwpleHBvcnQgZGVmYXVsdCB7CiAgY29tcG9uZW50czogewogICAgVGVhbU1lbWJlckZvcm06IFRlYW1NZW1iZXJGb3JtCiAgfSwKICBtaXhpbnM6IFtJdGVtTGlzdFBhZ2VCYXNlXSwKICBtZXRob2RzOiB7CiAgICBncmFudEFkbWluOiBmdW5jdGlvbiBncmFudEFkbWluKHVzZXJJZCkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZSgpIHsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZSQoX2NvbnRleHQpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMjsKICAgICAgICAgICAgICAgIHJldHVybiBheGlvcyh7CiAgICAgICAgICAgICAgICAgIG1ldGhvZDogJ3Bvc3QnLAogICAgICAgICAgICAgICAgICB1cmw6ICIvYXBpL3Byb2plY3QvIi5jb25jYXQoX3RoaXMucHJvamVjdElkLCAiL3VzZXJzLyIpLmNvbmNhdCh1c2VySWQsICIvYWRtaW4iKSwKICAgICAgICAgICAgICAgICAgcmVzcG9uc2VUeXBlOiAnanNvbicKICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gNDsKICAgICAgICAgICAgICAgIHJldHVybiBfdGhpcy5sb2FkSXRlbXMoKTsKCiAgICAgICAgICAgICAgY2FzZSA0OgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZSk7CiAgICAgIH0pKSgpOwogICAgfSwKICAgIHJlZnVzZUFkbWluOiBmdW5jdGlvbiByZWZ1c2VBZG1pbih1c2VySWQpIHsKICAgICAgdmFyIF90aGlzMiA9IHRoaXM7CgogICAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMigpIHsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTIkKF9jb250ZXh0MikgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDIucHJldiA9IF9jb250ZXh0Mi5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSAyOwogICAgICAgICAgICAgICAgcmV0dXJuIGF4aW9zKHsKICAgICAgICAgICAgICAgICAgbWV0aG9kOiAnZGVsZXRlJywKICAgICAgICAgICAgICAgICAgdXJsOiAiL2FwaS9wcm9qZWN0LyIuY29uY2F0KF90aGlzMi5wcm9qZWN0SWQsICIvdXNlcnMvIikuY29uY2F0KHVzZXJJZCwgIi9hZG1pbiIpLAogICAgICAgICAgICAgICAgICByZXNwb25zZVR5cGU6ICdqc29uJwogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgIGNhc2UgMjoKICAgICAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gNDsKICAgICAgICAgICAgICAgIHJldHVybiBfdGhpczIubG9hZEl0ZW1zKCk7CgogICAgICAgICAgICAgIGNhc2UgNDoKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Mi5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlMik7CiAgICAgIH0pKSgpOwogICAgfSwKICAgIGdldEhlYWRlcnM6IGZ1bmN0aW9uIGdldEhlYWRlcnMoKSB7CiAgICAgIHJldHVybiBbewogICAgICAgIHRleHQ6ICflp5PlkI0nLAogICAgICAgIHZhbHVlOiAnbmFtZScsCiAgICAgICAgd2lkdGg6ICc1MCUnCiAgICAgIH0sIHsKICAgICAgICB0ZXh0OiAn6LSm5oi3JywKICAgICAgICB2YWx1ZTogJ3VzZXJuYW1lJwogICAgICB9LCB7CiAgICAgICAgdGV4dDogJ+mCrueusScsCiAgICAgICAgdmFsdWU6ICdlbWFpbCcsCiAgICAgICAgd2lkdGg6ICc1MCUnCiAgICAgIH0sIHsKICAgICAgICB0ZXh0OiAn566h55CG5ZGYJywKICAgICAgICB2YWx1ZTogJ2FkbWluJwogICAgICB9LCB7CiAgICAgICAgdGV4dDogJ+WKqOS9nCcsCiAgICAgICAgdmFsdWU6ICdhY3Rpb25zJywKICAgICAgICBzb3J0YWJsZTogZmFsc2UKICAgICAgfV07CiAgICB9LAogICAgZ2V0U2luZ2xlSXRlbVVybDogZnVuY3Rpb24gZ2V0U2luZ2xlSXRlbVVybCgpIHsKICAgICAgcmV0dXJuICIvYXBpL3Byb2plY3QvIi5jb25jYXQodGhpcy5wcm9qZWN0SWQsICIvdXNlcnMvIikuY29uY2F0KHRoaXMuaXRlbUlkKTsKICAgIH0sCiAgICBnZXRJdGVtc1VybDogZnVuY3Rpb24gZ2V0SXRlbXNVcmwoKSB7CiAgICAgIHJldHVybiAiL2FwaS9wcm9qZWN0LyIuY29uY2F0KHRoaXMucHJvamVjdElkLCAiL3VzZXJzP3NvcnQ9bmFtZSZvcmRlcj1hc2MiKTsKICAgIH0sCiAgICBnZXRFdmVudE5hbWU6IGZ1bmN0aW9uIGdldEV2ZW50TmFtZSgpIHsKICAgICAgcmV0dXJuICdpLXJlcG9zaXRvcmllcyc7CiAgICB9LAogICAgaXNVc2VyQWRtaW46IGZ1bmN0aW9uIGlzVXNlckFkbWluKCkgewogICAgICB2YXIgX3RoaXMzID0gdGhpczsKCiAgICAgIHJldHVybiAodGhpcy5pdGVtcy5maW5kKGZ1bmN0aW9uICh4KSB7CiAgICAgICAgcmV0dXJuIHguaWQgPT09IF90aGlzMy51c2VySWQ7CiAgICAgIH0pIHx8IHt9KS5hZG1pbjsKICAgIH0KICB9Cn07"},{"version":3,"sources":["Team.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAoEA,OAAA,gBAAA,MAAA,+BAAA;AACA,OAAA,cAAA,MAAA,iCAAA;AACA,OAAA,KAAA,MAAA,OAAA;AAEA,eAAA;AACA,EAAA,UAAA,EAAA;AAAA,IAAA,cAAA,EAAA;AAAA,GADA;AAEA,EAAA,MAAA,EAAA,CAAA,gBAAA,CAFA;AAGA,EAAA,OAAA,EAAA;AACA,IAAA,UADA,sBACA,MADA,EACA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uBACA,KAAA,CAAA;AACA,kBAAA,MAAA,EAAA,MADA;AAEA,kBAAA,GAAA,yBAAA,KAAA,CAAA,SAAA,oBAAA,MAAA,WAFA;AAGA,kBAAA,YAAA,EAAA;AAHA,iBAAA,CADA;;AAAA;AAAA;AAAA,uBAMA,KAAA,CAAA,SAAA,EANA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAOA,KARA;AASA,IAAA,WATA,uBASA,MATA,EASA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uBACA,KAAA,CAAA;AACA,kBAAA,MAAA,EAAA,QADA;AAEA,kBAAA,GAAA,yBAAA,MAAA,CAAA,SAAA,oBAAA,MAAA,WAFA;AAGA,kBAAA,YAAA,EAAA;AAHA,iBAAA,CADA;;AAAA;AAAA;AAAA,uBAMA,MAAA,CAAA,SAAA,EANA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAOA,KAhBA;AAiBA,IAAA,UAjBA,wBAiBA;AACA,aAAA,CACA;AACA,QAAA,IAAA,EAAA,IADA;AAEA,QAAA,KAAA,EAAA,MAFA;AAGA,QAAA,KAAA,EAAA;AAHA,OADA,EAMA;AACA,QAAA,IAAA,EAAA,IADA;AAEA,QAAA,KAAA,EAAA;AAFA,OANA,EAUA;AACA,QAAA,IAAA,EAAA,IADA;AAEA,QAAA,KAAA,EAAA,OAFA;AAGA,QAAA,KAAA,EAAA;AAHA,OAVA,EAeA;AACA,QAAA,IAAA,EAAA,KADA;AAEA,QAAA,KAAA,EAAA;AAFA,OAfA,EAmBA;AACA,QAAA,IAAA,EAAA,IADA;AAEA,QAAA,KAAA,EAAA,SAFA;AAGA,QAAA,QAAA,EAAA;AAHA,OAnBA,CAAA;AAwBA,KA1CA;AA2CA,IAAA,gBA3CA,8BA2CA;AACA,oCAAA,KAAA,SAAA,oBAAA,KAAA,MAAA;AACA,KA7CA;AA8CA,IAAA,WA9CA,yBA8CA;AACA,oCAAA,KAAA,SAAA;AACA,KAhDA;AAiDA,IAAA,YAjDA,0BAiDA;AACA,aAAA,gBAAA;AACA,KAnDA;AAoDA,IAAA,WApDA,yBAoDA;AAAA;;AACA,aAAA,CAAA,KAAA,KAAA,CAAA,IAAA,CAAA,UAAA,CAAA;AAAA,eAAA,CAAA,CAAA,EAAA,KAAA,MAAA,CAAA,MAAA;AAAA,OAAA,KAAA,EAAA,EAAA,KAAA;AACA;AAtDA;AAHA,CAAA","sourcesContent":["<template xmlns:v-slot=\"http://www.w3.org/1999/XSL/Transform\">\n  <div v-if=\"items != null\">\n    <EditDialog\n      v-model=\"editDialog\"\n      :save-button-text=\"(this.itemId === 'new' ? '关联' : '保存')\"\n      :title=\"(this.itemId === 'new' ? '新' : '编辑') + ' 团队成员'\"\n      @save=\"loadItems()\"\n    >\n      <template v-slot:form=\"{ onSave, onError, needSave, needReset }\">\n        <TeamMemberForm\n          :project-id=\"projectId\"\n          :item-id=\"itemId\"\n          @save=\"onSave\"\n          @error=\"onError\"\n          :need-save=\"needSave\"\n          :need-reset=\"needReset\"\n        />\n      </template>\n    </EditDialog>\n\n    <YesNoDialog\n      title=\"Delete team member\"\n      text=\"Are you really want to delete the team member?\"\n      v-model=\"deleteItemDialog\"\n      @yes=\"deleteItem(itemId)\"\n    />\n\n    <v-toolbar flat color=\"white\">\n      <v-app-bar-nav-icon @click=\"showDrawer()\"></v-app-bar-nav-icon>\n      <v-toolbar-title>团队成员</v-toolbar-title>\n      <v-spacer></v-spacer>\n      <v-btn\n        color=\"primary\"\n        @click=\"editItem('new')\"\n      >新成员</v-btn>\n    </v-toolbar>\n\n    <v-data-table\n      :headers=\"headers\"\n      :items=\"items\"\n      hide-default-footer\n      class=\"mt-4\"\n      :items-per-page=\"Number.MAX_VALUE\"\n    >\n      <template v-slot:item.admin=\"{ item }\">\n\n        <v-switch\n          v-model=\"item.admin\"\n          inset\n          :disabled=\"!isUserAdmin()\"\n          @change=\"item.admin ? grantAdmin(item.id) : refuseAdmin(item.id)\"\n        ></v-switch>\n      </template>\n\n      <template v-slot:item.actions=\"{ item }\">\n        <v-btn\n          icon\n          :disabled=\"!isUserAdmin()\"\n          @click=\"askDeleteItem(item.id)\"\n        >\n          <v-icon>mdi-delete</v-icon>\n        </v-btn>\n      </template>\n    </v-data-table>\n  </div>\n\n</template>\n<script>\nimport ItemListPageBase from '@/components/ItemListPageBase';\nimport TeamMemberForm from '@/components/TeamMemberForm.vue';\nimport axios from 'axios';\n\nexport default {\n  components: { TeamMemberForm },\n  mixins: [ItemListPageBase],\n  methods: {\n    async grantAdmin(userId) {\n      await axios({\n        method: 'post',\n        url: `/api/project/${this.projectId}/users/${userId}/admin`,\n        responseType: 'json',\n      });\n      await this.loadItems();\n    },\n    async refuseAdmin(userId) {\n      await axios({\n        method: 'delete',\n        url: `/api/project/${this.projectId}/users/${userId}/admin`,\n        responseType: 'json',\n      });\n      await this.loadItems();\n    },\n    getHeaders() {\n      return [\n        {\n          text: '姓名',\n          value: 'name',\n          width: '50%',\n        },\n        {\n          text: '账户',\n          value: 'username',\n        },\n        {\n          text: '邮箱',\n          value: 'email',\n          width: '50%',\n        },\n        {\n          text: '管理员',\n          value: 'admin',\n        },\n        {\n          text: '动作',\n          value: 'actions',\n          sortable: false,\n        }];\n    },\n    getSingleItemUrl() {\n      return `/api/project/${this.projectId}/users/${this.itemId}`;\n    },\n    getItemsUrl() {\n      return `/api/project/${this.projectId}/users?sort=name&order=asc`;\n    },\n    getEventName() {\n      return 'i-repositories';\n    },\n    isUserAdmin() {\n      return (this.items.find((x) => x.id === this.userId) || {}).admin;\n    },\n  },\n};\n</script>\n"],"sourceRoot":"src/views/project"}]}