{"remainingRequest":"/Users/lx/go/src/github.com/ansible-semaphore/semaphore/web2/node_modules/thread-loader/dist/cjs.js!/Users/lx/go/src/github.com/ansible-semaphore/semaphore/web2/node_modules/babel-loader/lib/index.js!/Users/lx/go/src/github.com/ansible-semaphore/semaphore/web2/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/lx/go/src/github.com/ansible-semaphore/semaphore/web2/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/lx/go/src/github.com/ansible-semaphore/semaphore/web2/src/views/project/Templates.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/lx/go/src/github.com/ansible-semaphore/semaphore/web2/src/views/project/Templates.vue","mtime":1638860152195},{"path":"/Users/lx/go/src/github.com/ansible-semaphore/semaphore/web2/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/lx/go/src/github.com/ansible-semaphore/semaphore/web2/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/lx/go/src/github.com/ansible-semaphore/semaphore/web2/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/lx/go/src/github.com/ansible-semaphore/semaphore/web2/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/lx/go/src/github.com/ansible-semaphore/semaphore/web2/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuY29uY2F0IjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmluZCI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LnNvbWUiOwppbXBvcnQgX29iamVjdFNwcmVhZCBmcm9tICIvVXNlcnMvbHgvZ28vc3JjL2dpdGh1Yi5jb20vYW5zaWJsZS1zZW1hcGhvcmUvc2VtYXBob3JlL3dlYjIvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL29iamVjdFNwcmVhZDIiOwppbXBvcnQgInJlZ2VuZXJhdG9yLXJ1bnRpbWUvcnVudGltZSI7CmltcG9ydCBfYXN5bmNUb0dlbmVyYXRvciBmcm9tICIvVXNlcnMvbHgvZ28vc3JjL2dpdGh1Yi5jb20vYW5zaWJsZS1zZW1hcGhvcmUvc2VtYXBob3JlL3dlYjIvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2FzeW5jVG9HZW5lcmF0b3IiOwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwppbXBvcnQgSXRlbUxpc3RQYWdlQmFzZSBmcm9tICdAL2NvbXBvbmVudHMvSXRlbUxpc3RQYWdlQmFzZSc7CmltcG9ydCBUZW1wbGF0ZUZvcm0gZnJvbSAnQC9jb21wb25lbnRzL1RlbXBsYXRlRm9ybS52dWUnOwppbXBvcnQgVGFza0xpbmsgZnJvbSAnQC9jb21wb25lbnRzL1Rhc2tMaW5rLnZ1ZSc7CmltcG9ydCBheGlvcyBmcm9tICdheGlvcyc7CmltcG9ydCBUYXNrRm9ybSBmcm9tICdAL2NvbXBvbmVudHMvVGFza0Zvcm0udnVlJzsKaW1wb3J0IEVkaXRWaWV3c0Zvcm0gZnJvbSAnQC9jb21wb25lbnRzL0VkaXRWaWV3c0Zvcm0udnVlJzsKaW1wb3J0IFRhYmxlU2V0dGluZ3NTaGVldCBmcm9tICdAL2NvbXBvbmVudHMvVGFibGVTZXR0aW5nc1NoZWV0LnZ1ZSc7CmltcG9ydCBUYXNrTGlzdCBmcm9tICdAL2NvbXBvbmVudHMvVGFza0xpc3QudnVlJzsKaW1wb3J0IEV2ZW50QnVzIGZyb20gJ0AvZXZlbnQtYnVzJzsKaW1wb3J0IFRhc2tTdGF0dXMgZnJvbSAnQC9jb21wb25lbnRzL1Rhc2tTdGF0dXMudnVlJzsKaW1wb3J0IHNvY2tldCBmcm9tICdAL3NvY2tldCc7CmltcG9ydCB7IFRFTVBMQVRFX1RZUEVfQUNUSU9OX1RJVExFUywgVEVNUExBVEVfVFlQRV9JQ09OUyB9IGZyb20gJy4uLy4uL2xpYi9jb25zdGFudHMnOwpleHBvcnQgZGVmYXVsdCB7CiAgY29tcG9uZW50czogewogICAgVGVtcGxhdGVGb3JtOiBUZW1wbGF0ZUZvcm0sCiAgICBUYXNrRm9ybTogVGFza0Zvcm0sCiAgICBUYWJsZVNldHRpbmdzU2hlZXQ6IFRhYmxlU2V0dGluZ3NTaGVldCwKICAgIFRhc2tTdGF0dXM6IFRhc2tTdGF0dXMsCiAgICBUYXNrTGluazogVGFza0xpbmssCiAgICBUYXNrTGlzdDogVGFza0xpc3QsCiAgICBFZGl0Vmlld3NGb3JtOiBFZGl0Vmlld3NGb3JtCiAgfSwKICBtaXhpbnM6IFtJdGVtTGlzdFBhZ2VCYXNlXSwKICBjcmVhdGVkOiBmdW5jdGlvbiBjcmVhdGVkKCkgewogICAgdmFyIF90aGlzID0gdGhpczsKCiAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlKCkgewogICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZSQoX2NvbnRleHQpIHsKICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkgewogICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgc29ja2V0LmFkZExpc3RlbmVyKGZ1bmN0aW9uIChkYXRhKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMub25XZWJzb2NrZXREYXRhUmVjZWl2ZWQoZGF0YSk7CiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDM7CiAgICAgICAgICAgICAgcmV0dXJuIF90aGlzLmxvYWREYXRhKCk7CgogICAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LnN0b3AoKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0sIF9jYWxsZWUpOwogICAgfSkpKCk7CiAgfSwKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgVEVNUExBVEVfVFlQRV9JQ09OUzogVEVNUExBVEVfVFlQRV9JQ09OUywKICAgICAgVEVNUExBVEVfVFlQRV9BQ1RJT05fVElUTEVTOiBURU1QTEFURV9UWVBFX0FDVElPTl9USVRMRVMsCiAgICAgIGludmVudG9yeTogbnVsbCwKICAgICAgZW52aXJvbm1lbnQ6IG51bGwsCiAgICAgIHJlcG9zaXRvcmllczogbnVsbCwKICAgICAgbmV3VGFza0RpYWxvZzogbnVsbCwKICAgICAgc2V0dGluZ3NTaGVldDogbnVsbCwKICAgICAgZmlsdGVyZWRIZWFkZXJzOiBbXSwKICAgICAgb3BlbmVkSXRlbXM6IFtdLAogICAgICB2aWV3czogbnVsbCwKICAgICAgZWRpdFZpZXdzRGlhbG9nOiBudWxsLAogICAgICB2aWV3SXRlbXNMb2FkaW5nOiBudWxsLAogICAgICB2aWV3VGFiOiBudWxsCiAgICB9OwogIH0sCiAgY29tcHV0ZWQ6IHsKICAgIHZpZXdJZDogZnVuY3Rpb24gdmlld0lkKCkgewogICAgICBpZiAoL14tP1xkKyQvLnRlc3QodGhpcy4kcm91dGUucGFyYW1zLnZpZXdJZCkpIHsKICAgICAgICByZXR1cm4gcGFyc2VJbnQodGhpcy4kcm91dGUucGFyYW1zLnZpZXdJZCwgMTApOwogICAgICB9CgogICAgICByZXR1cm4gdGhpcy4kcm91dGUucGFyYW1zLnZpZXdJZDsKICAgIH0sCiAgICB0ZW1wbGF0ZVR5cGU6IGZ1bmN0aW9uIHRlbXBsYXRlVHlwZSgpIHsKICAgICAgdmFyIF90aGlzMiA9IHRoaXM7CgogICAgICBpZiAodGhpcy5pdGVtSWQgPT0gbnVsbCB8fCB0aGlzLml0ZW1JZCA9PT0gJ25ldycpIHsKICAgICAgICByZXR1cm4gJyc7CiAgICAgIH0KCiAgICAgIHJldHVybiB0aGlzLml0ZW1zLmZpbmQoZnVuY3Rpb24gKHgpIHsKICAgICAgICByZXR1cm4geC5pZCA9PT0gX3RoaXMyLml0ZW1JZDsKICAgICAgfSkudHlwZTsKICAgIH0sCiAgICB0ZW1wbGF0ZUFsaWFzOiBmdW5jdGlvbiB0ZW1wbGF0ZUFsaWFzKCkgewogICAgICB2YXIgX3RoaXMzID0gdGhpczsKCiAgICAgIGlmICh0aGlzLml0ZW1JZCA9PSBudWxsIHx8IHRoaXMuaXRlbUlkID09PSAnbmV3JykgewogICAgICAgIHJldHVybiAnJzsKICAgICAgfQoKICAgICAgcmV0dXJuIHRoaXMuaXRlbXMuZmluZChmdW5jdGlvbiAoeCkgewogICAgICAgIHJldHVybiB4LmlkID09PSBfdGhpczMuaXRlbUlkOwogICAgICB9KS5hbGlhczsKICAgIH0sCiAgICBpc0xvYWRlZDogZnVuY3Rpb24gaXNMb2FkZWQoKSB7CiAgICAgIHJldHVybiB0aGlzLml0ZW1zICYmIHRoaXMuaW52ZW50b3J5ICYmIHRoaXMuZW52aXJvbm1lbnQgJiYgdGhpcy5yZXBvc2l0b3JpZXMgJiYgdGhpcy52aWV3czsKICAgIH0KICB9LAogIHdhdGNoOiB7CiAgICB2aWV3SWQ6IGZ1bmN0aW9uIHZpZXdJZCgpIHsKICAgICAgdmFyIF90aGlzNCA9IHRoaXM7CgogICAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMigpIHsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTIkKF9jb250ZXh0MikgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDIucHJldiA9IF9jb250ZXh0Mi5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgX2NvbnRleHQyLnByZXYgPSAwOwogICAgICAgICAgICAgICAgX3RoaXM0LnZpZXdJdGVtc0xvYWRpbmcgPSB0cnVlOwogICAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSA0OwogICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzNC5sb2FkSXRlbXMoKTsKCiAgICAgICAgICAgICAgY2FzZSA0OgogICAgICAgICAgICAgICAgaWYgKF90aGlzNC52aWV3SWQpIHsKICAgICAgICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oInByb2plY3QiLmNvbmNhdChfdGhpczQucHJvamVjdElkLCAiX19sYXN0VmlzaXRlZFZpZXdJZCIpLCBfdGhpczQudmlld0lkKTsKICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKCJwcm9qZWN0Ii5jb25jYXQoX3RoaXM0LnByb2plY3RJZCwgIl9fbGFzdFZpc2l0ZWRWaWV3SWQiKSk7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgIGNhc2UgNToKICAgICAgICAgICAgICAgIF9jb250ZXh0Mi5wcmV2ID0gNTsKICAgICAgICAgICAgICAgIF90aGlzNC52aWV3SXRlbXNMb2FkaW5nID0gZmFsc2U7CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyLmZpbmlzaCg1KTsKCiAgICAgICAgICAgICAgY2FzZSA4OgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyLnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUyLCBudWxsLCBbWzAsLCA1LCA4XV0pOwogICAgICB9KSkoKTsKICAgIH0KICB9LAogIG1ldGhvZHM6IHsKICAgIGJlZm9yZUxvYWRJdGVtczogZnVuY3Rpb24gYmVmb3JlTG9hZEl0ZW1zKCkgewogICAgICB2YXIgX3RoaXM1ID0gdGhpczsKCiAgICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUzKCkgewogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMyQoX2NvbnRleHQzKSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0My5wcmV2ID0gX2NvbnRleHQzLm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBfY29udGV4dDMubmV4dCA9IDI7CiAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXM1LmxvYWRWaWV3cygpOwoKICAgICAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDMuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZTMpOwogICAgICB9KSkoKTsKICAgIH0sCiAgICBnZXRWaWV3VXJsOiBmdW5jdGlvbiBnZXRWaWV3VXJsKHZpZXdJZCkgewogICAgICBpZiAodmlld0lkID09IG51bGwpIHsKICAgICAgICByZXR1cm4gIi9wcm9qZWN0LyIuY29uY2F0KHRoaXMucHJvamVjdElkLCAiL3RlbXBsYXRlcyIpOwogICAgICB9CgogICAgICByZXR1cm4gIi9wcm9qZWN0LyIuY29uY2F0KHRoaXMucHJvamVjdElkLCAiL3ZpZXdzLyIpLmNvbmNhdCh2aWV3SWQsICIvdGVtcGxhdGVzIik7CiAgICB9LAogICAgbG9hZFZpZXdzOiBmdW5jdGlvbiBsb2FkVmlld3MoKSB7CiAgICAgIHZhciBfdGhpczYgPSB0aGlzOwoKICAgICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTQoKSB7CiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWU0JChfY29udGV4dDQpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQ0LnByZXYgPSBfY29udGV4dDQubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIF9jb250ZXh0NC5uZXh0ID0gMjsKICAgICAgICAgICAgICAgIHJldHVybiBheGlvcyh7CiAgICAgICAgICAgICAgICAgIG1ldGhvZDogJ2dldCcsCiAgICAgICAgICAgICAgICAgIHVybDogIi9hcGkvcHJvamVjdC8iLmNvbmNhdChfdGhpczYucHJvamVjdElkLCAiL3ZpZXdzIiksCiAgICAgICAgICAgICAgICAgIHJlc3BvbnNlVHlwZTogJ2pzb24nCiAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICAgICAgX3RoaXM2LnZpZXdzID0gX2NvbnRleHQ0LnNlbnQuZGF0YTsKCiAgICAgICAgICAgICAgICBfdGhpczYudmlld3Muc29ydChmdW5jdGlvbiAodjEsIHYyKSB7CiAgICAgICAgICAgICAgICAgIHJldHVybiB2MS5wb3NpdGlvbiAtIHYyLnBvc2l0aW9uOwogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgICAgaWYgKCEoX3RoaXM2LnZpZXdJZCAhPSBudWxsICYmICFfdGhpczYudmlld3Muc29tZShmdW5jdGlvbiAodikgewogICAgICAgICAgICAgICAgICByZXR1cm4gdi5pZCA9PT0gX3RoaXM2LnZpZXdJZDsKICAgICAgICAgICAgICAgIH0pKSkgewogICAgICAgICAgICAgICAgICBfY29udGV4dDQubmV4dCA9IDc7CiAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIF9jb250ZXh0NC5uZXh0ID0gNzsKICAgICAgICAgICAgICAgIHJldHVybiBfdGhpczYuJHJvdXRlci5wdXNoKHsKICAgICAgICAgICAgICAgICAgcGF0aDogIi9wcm9qZWN0LyIuY29uY2F0KF90aGlzNi5wcm9qZWN0SWQsICIvdGVtcGxhdGVzIikKICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICBjYXNlIDc6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDQuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZTQpOwogICAgICB9KSkoKTsKICAgIH0sCiAgICBjbG9zZUVkaXRWaWV3RGlhbG9nOiBmdW5jdGlvbiBjbG9zZUVkaXRWaWV3RGlhbG9nKCkgewogICAgICB2YXIgX3RoaXM3ID0gdGhpczsKCiAgICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWU1KCkgewogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlNSQoX2NvbnRleHQ1KSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0NS5wcmV2ID0gX2NvbnRleHQ1Lm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBfdGhpczcuZWRpdFZpZXdzRGlhbG9nID0gZmFsc2U7CiAgICAgICAgICAgICAgICBfY29udGV4dDUubmV4dCA9IDM7CiAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXM3LmxvYWRWaWV3cygpOwoKICAgICAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDUuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZTUpOwogICAgICB9KSkoKTsKICAgIH0sCiAgICBvbldlYnNvY2tldERhdGFSZWNlaXZlZDogZnVuY3Rpb24gb25XZWJzb2NrZXREYXRhUmVjZWl2ZWQoZGF0YSkgewogICAgICB2YXIgX3RoaXM4ID0gdGhpczsKCiAgICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWU2KCkgewogICAgICAgIHZhciB0ZW1wbGF0ZTsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTYkKF9jb250ZXh0NikgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDYucHJldiA9IF9jb250ZXh0Ni5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgaWYgKCEoZGF0YS5wcm9qZWN0X2lkICE9PSBfdGhpczgucHJvamVjdElkIHx8IGRhdGEudHlwZSAhPT0gJ3VwZGF0ZScpKSB7CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0Ni5uZXh0ID0gMjsKICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Ni5hYnJ1cHQoInJldHVybiIpOwoKICAgICAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgICAgICB0ZW1wbGF0ZSA9IF90aGlzOC5pdGVtcy5maW5kKGZ1bmN0aW9uIChpdGVtKSB7CiAgICAgICAgICAgICAgICAgIHJldHVybiBpdGVtLmlkID09PSBkYXRhLnRlbXBsYXRlX2lkOwogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgICAgaWYgKCEodGVtcGxhdGUgPT0gbnVsbCkpIHsKICAgICAgICAgICAgICAgICAgX2NvbnRleHQ2Lm5leHQgPSA1OwogICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ2LmFicnVwdCgicmV0dXJuIik7CgogICAgICAgICAgICAgIGNhc2UgNToKICAgICAgICAgICAgICAgIGlmICghKGRhdGEudGFza19pZCAhPT0gdGVtcGxhdGUubGFzdF90YXNrX2lkKSkgewogICAgICAgICAgICAgICAgICBfY29udGV4dDYubmV4dCA9IDEzOwogICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBfY29udGV4dDYudDAgPSBPYmplY3Q7CiAgICAgICAgICAgICAgICBfY29udGV4dDYudDEgPSB0ZW1wbGF0ZS5sYXN0X3Rhc2s7CiAgICAgICAgICAgICAgICBfY29udGV4dDYubmV4dCA9IDEwOwogICAgICAgICAgICAgICAgcmV0dXJuIGF4aW9zKHsKICAgICAgICAgICAgICAgICAgbWV0aG9kOiAnZ2V0JywKICAgICAgICAgICAgICAgICAgdXJsOiAiL2FwaS9wcm9qZWN0LyIuY29uY2F0KF90aGlzOC5wcm9qZWN0SWQsICIvdGFza3MvIikuY29uY2F0KGRhdGEudGFza19pZCksCiAgICAgICAgICAgICAgICAgIHJlc3BvbnNlVHlwZTogJ2pzb24nCiAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgY2FzZSAxMDoKICAgICAgICAgICAgICAgIF9jb250ZXh0Ni50MiA9IF9jb250ZXh0Ni5zZW50LmRhdGE7CgogICAgICAgICAgICAgICAgX2NvbnRleHQ2LnQwLmFzc2lnbi5jYWxsKF9jb250ZXh0Ni50MCwgX2NvbnRleHQ2LnQxLCBfY29udGV4dDYudDIpOwoKICAgICAgICAgICAgICAgIHRlbXBsYXRlLmxhc3RfdGFza19pZCA9IGRhdGEudGFza19pZDsKCiAgICAgICAgICAgICAgY2FzZSAxMzoKICAgICAgICAgICAgICAgIE9iamVjdC5hc3NpZ24odGVtcGxhdGUubGFzdF90YXNrLCBfb2JqZWN0U3ByZWFkKF9vYmplY3RTcHJlYWQoe30sIGRhdGEpLCB7fSwgewogICAgICAgICAgICAgICAgICB0eXBlOiB1bmRlZmluZWQKICAgICAgICAgICAgICAgIH0pKTsKCiAgICAgICAgICAgICAgY2FzZSAxNDoKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Ni5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlNik7CiAgICAgIH0pKSgpOwogICAgfSwKICAgIG9uVGFza0NyZWF0ZWQ6IGZ1bmN0aW9uIG9uVGFza0NyZWF0ZWQoZSkgewogICAgICBFdmVudEJ1cy4kZW1pdCgnaS1zaG93LXRhc2snLCB7CiAgICAgICAgdGFza0lkOiBlLml0ZW0uaWQKICAgICAgfSk7CiAgICAgIHRoaXMuaXRlbUlkID0gbnVsbDsKICAgIH0sCiAgICBzaG93VGFza0xvZzogZnVuY3Rpb24gc2hvd1Rhc2tMb2codGFza0lkKSB7CiAgICAgIEV2ZW50QnVzLiRlbWl0KCdpLXNob3ctdGFzaycsIHsKICAgICAgICB0YXNrSWQ6IHRhc2tJZAogICAgICB9KTsKICAgIH0sCiAgICBjcmVhdGVUYXNrOiBmdW5jdGlvbiBjcmVhdGVUYXNrKGl0ZW1JZCkgewogICAgICB0aGlzLml0ZW1JZCA9IGl0ZW1JZDsKICAgICAgdGhpcy5uZXdUYXNrRGlhbG9nID0gdHJ1ZTsKICAgIH0sCiAgICBnZXRIZWFkZXJzOiBmdW5jdGlvbiBnZXRIZWFkZXJzKCkgewogICAgICByZXR1cm4gW3sKICAgICAgICB0ZXh0OiAn5qih5p2/5ZCN56ewJywKICAgICAgICB2YWx1ZTogJ2FsaWFzJwogICAgICB9LCB7CiAgICAgICAgdGV4dDogJ+eJiOacrCcsCiAgICAgICAgdmFsdWU6ICd2ZXJzaW9uJywKICAgICAgICBzb3J0YWJsZTogZmFsc2UKICAgICAgfSwgewogICAgICAgIHRleHQ6ICfnirbmgIEnLAogICAgICAgIHZhbHVlOiAnc3RhdHVzJywKICAgICAgICBzb3J0YWJsZTogZmFsc2UKICAgICAgfSwgewogICAgICAgIHRleHQ6ICfmnIDov5Hku7vliqEnLAogICAgICAgIHZhbHVlOiAnbGFzdF90YXNrJywKICAgICAgICBzb3J0YWJsZTogZmFsc2UKICAgICAgfSwgewogICAgICAgIHRleHQ6ICfliafmnKwnLAogICAgICAgIHZhbHVlOiAncGxheWJvb2snLAogICAgICAgIHNvcnRhYmxlOiBmYWxzZQogICAgICB9LCB7CiAgICAgICAgdGV4dDogJ+S4u+acuua4heWNlScsCiAgICAgICAgdmFsdWU6ICdpbnZlbnRvcnlfaWQnLAogICAgICAgIHNvcnRhYmxlOiBmYWxzZQogICAgICB9LCB7CiAgICAgICAgdGV4dDogJ+i/kOihjOeOr+WigycsCiAgICAgICAgdmFsdWU6ICdlbnZpcm9ubWVudF9pZCcsCiAgICAgICAgc29ydGFibGU6IGZhbHNlCiAgICAgIH0sIHsKICAgICAgICB0ZXh0OiAn5Ymn5pys5bqTJywKICAgICAgICB2YWx1ZTogJ3JlcG9zaXRvcnlfaWQnLAogICAgICAgIHNvcnRhYmxlOiBmYWxzZQogICAgICB9LCB7CiAgICAgICAgdGV4dDogJ+WKqOS9nCcsCiAgICAgICAgdmFsdWU6ICdhY3Rpb25zJywKICAgICAgICBzb3J0YWJsZTogZmFsc2UsCiAgICAgICAgd2lkdGg6ICcwJScKICAgICAgfV07CiAgICB9LAogICAgZ2V0SXRlbXNVcmw6IGZ1bmN0aW9uIGdldEl0ZW1zVXJsKCkgewogICAgICByZXR1cm4gdGhpcy52aWV3SWQgPT0gbnVsbCA/ICIvYXBpL3Byb2plY3QvIi5jb25jYXQodGhpcy5wcm9qZWN0SWQsICIvdGVtcGxhdGVzIikgOiAiL2FwaS9wcm9qZWN0LyIuY29uY2F0KHRoaXMucHJvamVjdElkLCAiL3ZpZXdzLyIpLmNvbmNhdCh0aGlzLnZpZXdJZCwgIi90ZW1wbGF0ZXMiKTsKICAgIH0sCiAgICBsb2FkRGF0YTogZnVuY3Rpb24gbG9hZERhdGEoKSB7CiAgICAgIHZhciBfdGhpczkgPSB0aGlzOwoKICAgICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTcoKSB7CiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWU3JChfY29udGV4dDcpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQ3LnByZXYgPSBfY29udGV4dDcubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIF9jb250ZXh0Ny5uZXh0ID0gMjsKICAgICAgICAgICAgICAgIHJldHVybiBheGlvcyh7CiAgICAgICAgICAgICAgICAgIG1ldGhvZDogJ2dldCcsCiAgICAgICAgICAgICAgICAgIHVybDogIi9hcGkvcHJvamVjdC8iLmNvbmNhdChfdGhpczkucHJvamVjdElkLCAiL2ludmVudG9yeSIpLAogICAgICAgICAgICAgICAgICByZXNwb25zZVR5cGU6ICdqc29uJwogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgIGNhc2UgMjoKICAgICAgICAgICAgICAgIF90aGlzOS5pbnZlbnRvcnkgPSBfY29udGV4dDcuc2VudC5kYXRhOwogICAgICAgICAgICAgICAgX2NvbnRleHQ3Lm5leHQgPSA1OwogICAgICAgICAgICAgICAgcmV0dXJuIGF4aW9zKHsKICAgICAgICAgICAgICAgICAgbWV0aG9kOiAnZ2V0JywKICAgICAgICAgICAgICAgICAgdXJsOiAiL2FwaS9wcm9qZWN0LyIuY29uY2F0KF90aGlzOS5wcm9qZWN0SWQsICIvZW52aXJvbm1lbnQiKSwKICAgICAgICAgICAgICAgICAgcmVzcG9uc2VUeXBlOiAnanNvbicKICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICBjYXNlIDU6CiAgICAgICAgICAgICAgICBfdGhpczkuZW52aXJvbm1lbnQgPSBfY29udGV4dDcuc2VudC5kYXRhOwogICAgICAgICAgICAgICAgX2NvbnRleHQ3Lm5leHQgPSA4OwogICAgICAgICAgICAgICAgcmV0dXJuIGF4aW9zKHsKICAgICAgICAgICAgICAgICAgbWV0aG9kOiAnZ2V0JywKICAgICAgICAgICAgICAgICAgdXJsOiAiL2FwaS9wcm9qZWN0LyIuY29uY2F0KF90aGlzOS5wcm9qZWN0SWQsICIvcmVwb3NpdG9yaWVzIiksCiAgICAgICAgICAgICAgICAgIHJlc3BvbnNlVHlwZTogJ2pzb24nCiAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgY2FzZSA4OgogICAgICAgICAgICAgICAgX3RoaXM5LnJlcG9zaXRvcmllcyA9IF9jb250ZXh0Ny5zZW50LmRhdGE7CgogICAgICAgICAgICAgIGNhc2UgOToKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Ny5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlNyk7CiAgICAgIH0pKSgpOwogICAgfSwKICAgIG9uVGFibGVTZXR0aW5nc0NoYW5nZTogZnVuY3Rpb24gb25UYWJsZVNldHRpbmdzQ2hhbmdlKF9yZWYpIHsKICAgICAgdmFyIGhlYWRlcnMgPSBfcmVmLmhlYWRlcnM7CiAgICAgIHRoaXMuZmlsdGVyZWRIZWFkZXJzID0gaGVhZGVyczsKICAgIH0KICB9Cn07"},{"version":3,"sources":["Templates.vue"],"names":[],"mappings":"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","sourcesContent":["<template xmlns:v-slot=\"http://www.w3.org/1999/XSL/Transform\">\n  <div v-if=\"!isLoaded\">\n    <v-progress-linear\n        indeterminate\n        color=\"primary darken-2\"\n    ></v-progress-linear>\n  </div>\n  <div v-else>\n    <v-dialog\n        v-model=\"editViewsDialog\"\n        :max-width=\"400\"\n        persistent\n        :transition=\"false\"\n    >\n      <v-card>\n        <v-card-title>\n          编辑视图\n          <v-spacer></v-spacer>\n          <v-btn icon @click=\"closeEditViewDialog()\">\n            <v-icon>mdi-close</v-icon>\n          </v-btn>\n        </v-card-title>\n        <v-card-text>\n          <EditViewsForm :project-id=\"projectId\"/>\n        </v-card-text>\n      </v-card>\n    </v-dialog>\n\n    <EditDialog\n        :max-width=\"700\"\n        v-model=\"editDialog\"\n        save-button-text=\"创建\"\n        title=\"新模板\"\n        @save=\"loadItems()\"\n    >\n      <template v-slot:form=\"{ onSave, onError, needSave, needReset }\">\n        <TemplateForm\n            :project-id=\"projectId\"\n            item-id=\"new\"\n            @save=\"onSave\"\n            @error=\"onError\"\n            :need-save=\"needSave\"\n            :need-reset=\"needReset\"\n        />\n      </template>\n    </EditDialog>\n\n    <EditDialog\n        v-model=\"newTaskDialog\"\n        :save-button-text=\"TEMPLATE_TYPE_ACTION_TITLES[templateType]\"\n        title=\"新任务\"\n        @save=\"onTaskCreated\"\n        @close=\"itemId = null\"\n    >\n      <template v-slot:title={}>\n        <v-icon small class=\"mr-4\">{{ TEMPLATE_TYPE_ICONS[templateType] }}</v-icon>\n        <span class=\"breadcrumbs__item\">{{ templateAlias }}</span>\n        <v-icon>mdi-chevron-right</v-icon>\n        <span class=\"breadcrumbs__item\">新任务</span>\n      </template>\n\n      <template v-slot:form=\"{ onSave, onError, needSave, needReset }\">\n        <TaskForm\n            :project-id=\"projectId\"\n            item-id=\"new\"\n            :template-id=\"itemId\"\n            @save=\"onSave\"\n            @error=\"onError\"\n            :need-save=\"needSave\"\n            :need-reset=\"needReset\"\n        />\n      </template>\n    </EditDialog>\n\n    <v-toolbar flat color=\"white\">\n      <v-app-bar-nav-icon @click=\"showDrawer()\"></v-app-bar-nav-icon>\n      <v-toolbar-title>任务模板</v-toolbar-title>\n      <v-spacer></v-spacer>\n      <v-btn\n          color=\"primary\"\n          @click=\"editItem('new')\"\n          class=\"mr-1\"\n      >新模板\n      </v-btn>\n\n      <v-btn icon @click=\"settingsSheet = true\">\n        <v-icon>mdi-cog</v-icon>\n      </v-btn>\n    </v-toolbar>\n\n    <v-tabs show-arrows class=\"pl-4\" v-model=\"viewTab\">\n      <v-tab :to=\"getViewUrl(null)\" :disabled=\"viewItemsLoading\">All</v-tab>\n\n      <v-tab\n          v-for=\"(view) in views\"\n          :key=\"view.id\"\n          :to=\"getViewUrl(view.id)\"\n          :disabled=\"viewItemsLoading\"\n      >{{ view.title }}\n      </v-tab>\n\n      <v-btn icon class=\"mt-2 ml-4\" @click=\"editViewsDialog = true\">\n        <v-icon>mdi-pencil</v-icon>\n      </v-btn>\n    </v-tabs>\n\n    <v-data-table\n        hide-default-footer\n        class=\"mt-4 templates-table\"\n        single-expand\n        show-expand\n        :headers=\"filteredHeaders\"\n        :items=\"items\"\n        :items-per-page=\"Number.MAX_VALUE\"\n        :expanded.sync=\"openedItems\"\n        :style=\"{\n          opacity: viewItemsLoading ? 0.3 : 1,\n        }\"\n    >\n      <template v-slot:item.alias=\"{ item }\">\n        <v-icon class=\"mr-3\" small>\n          {{ TEMPLATE_TYPE_ICONS[item.type] }}\n        </v-icon>\n        <router-link\n            :to=\"viewId\n              ? `/project/${projectId}/views/${viewId}/templates/${item.id}`\n              : `/project/${projectId}/templates/${item.id}`\"\n        >{{ item.alias }}</router-link>\n      </template>\n\n      <template v-slot:item.version=\"{ item }\">\n        <TaskLink\n            v-if=\"item.last_task && item.last_task.tpl_type !== ''\"\n            :disabled=\"true\"\n            :status=\"item.last_task.status\"\n\n            :task-id=\"item.last_task.tpl_type === 'build'\n              ? item.last_task.id\n              : item.last_task.build_task.id\"\n\n            :label=\"item.last_task.tpl_type === 'build'\n              ? item.last_task.version\n              : item.last_task.build_task.version\"\n\n            :tooltip=\"item.last_task.tpl_type === 'build'\n              ? item.last_task.message\n              : item.last_task.build_task.message\"\n        />\n        <div v-else>&mdash;</div>\n      </template>\n\n      <template v-slot:item.status=\"{ item }\">\n        <div class=\"mt-2 mb-2 d-flex\" v-if=\"item.last_task != null\">\n          <TaskStatus :status=\"item.last_task.status\"/>\n        </div>\n        <div v-else class=\"mt-3 mb-2 d-flex\" style=\"color: gray;\">Not launched</div>\n      </template>\n\n      <template v-slot:item.last_task=\"{ item }\">\n        <div class=\"mt-2 mb-2\" v-if=\"item.last_task != null\" style=\"line-height: 1\">\n          <TaskLink\n              :task-id=\"item.last_task.id\"\n              :label=\"'#' + item.last_task.id\"\n              :tooltip=\"item.last_task.message\"\n          />\n          <div style=\"color: gray; font-size: 14px;\">\n            by {{ item.last_task.user_name }} {{ item.last_task.created|formatDate }}\n          </div>\n        </div>\n      </template>\n\n      <template v-slot:item.inventory_id=\"{ item }\">\n        {{ inventory.find((x) => x.id === item.inventory_id).name }}\n      </template>\n\n      <template v-slot:item.environment_id=\"{ item }\">\n        {{ environment.find((x) => x.id === item.environment_id).name }}\n      </template>\n\n      <template v-slot:item.repository_id=\"{ item }\">\n        {{ repositories.find((x) => x.id === item.repository_id).name }}\n      </template>\n\n      <template v-slot:item.actions=\"{ item }\">\n        <v-btn text color=\"black\" class=\"pl-1 pr-2\" @click=\"createTask(item.id)\">\n          <v-icon class=\"pr-1\">mdi-replay</v-icon>\n          {{ TEMPLATE_TYPE_ACTION_TITLES[item.type] }}\n        </v-btn>\n      </template>\n\n      <template v-slot:expanded-item=\"{ headers, item }\">\n        <td\n            :colspan=\"headers.length\"\n            v-if=\"openedItems.some((template) => template.id === item.id)\"\n        >\n          <TaskList\n              style=\"border: 1px solid lightgray; border-radius: 6px; margin: 10px 0;\"\n              :template=\"item\"\n              :limit=\"5\"\n              :hide-footer=\"true\"\n          />\n        </td>\n      </template>\n    </v-data-table>\n\n    <TableSettingsSheet\n        v-model=\"settingsSheet\"\n        table-name=\"project__template\"\n        :headers=\"headers\"\n        @change=\"onTableSettingsChange\"\n    />\n  </div>\n</template>\n<style lang=\"scss\">\n@import '~vuetify/src/styles/settings/_variables';\n\n.templates-table .text-start:first-child {\n  padding-right: 0 !important;\n}\n\n@media #{map-get($display-breakpoints, 'sm-and-down')} {\n  .templates-table .v-data-table__mobile-row:first-child {\n    display: none !important;\n  }\n}\n</style>\n<script>\nimport ItemListPageBase from '@/components/ItemListPageBase';\nimport TemplateForm from '@/components/TemplateForm.vue';\nimport TaskLink from '@/components/TaskLink.vue';\nimport axios from 'axios';\nimport TaskForm from '@/components/TaskForm.vue';\nimport EditViewsForm from '@/components/EditViewsForm.vue';\nimport TableSettingsSheet from '@/components/TableSettingsSheet.vue';\nimport TaskList from '@/components/TaskList.vue';\nimport EventBus from '@/event-bus';\nimport TaskStatus from '@/components/TaskStatus.vue';\nimport socket from '@/socket';\n\nimport { TEMPLATE_TYPE_ACTION_TITLES, TEMPLATE_TYPE_ICONS } from '../../lib/constants';\n\nexport default {\n  components: {\n    TemplateForm, TaskForm, TableSettingsSheet, TaskStatus, TaskLink, TaskList, EditViewsForm,\n  },\n  mixins: [ItemListPageBase],\n  async created() {\n    socket.addListener((data) => this.onWebsocketDataReceived(data));\n\n    await this.loadData();\n  },\n  data() {\n    return {\n      TEMPLATE_TYPE_ICONS,\n      TEMPLATE_TYPE_ACTION_TITLES,\n      inventory: null,\n      environment: null,\n      repositories: null,\n      newTaskDialog: null,\n      settingsSheet: null,\n      filteredHeaders: [],\n      openedItems: [],\n      views: null,\n      editViewsDialog: null,\n      viewItemsLoading: null,\n      viewTab: null,\n    };\n  },\n  computed: {\n    viewId() {\n      if (/^-?\\d+$/.test(this.$route.params.viewId)) {\n        return parseInt(this.$route.params.viewId, 10);\n      }\n      return this.$route.params.viewId;\n    },\n\n    templateType() {\n      if (this.itemId == null || this.itemId === 'new') {\n        return '';\n      }\n      return this.items.find((x) => x.id === this.itemId).type;\n    },\n\n    templateAlias() {\n      if (this.itemId == null || this.itemId === 'new') {\n        return '';\n      }\n      return this.items.find((x) => x.id === this.itemId).alias;\n    },\n\n    isLoaded() {\n      return this.items\n          && this.inventory\n          && this.environment\n          && this.repositories\n          && this.views;\n    },\n  },\n  watch: {\n    async viewId() {\n      try {\n        this.viewItemsLoading = true;\n        await this.loadItems();\n        if (this.viewId) {\n          localStorage.setItem(`project${this.projectId}__lastVisitedViewId`, this.viewId);\n        } else {\n          localStorage.removeItem(`project${this.projectId}__lastVisitedViewId`);\n        }\n      } finally {\n        this.viewItemsLoading = false;\n      }\n    },\n  },\n  methods: {\n    async beforeLoadItems() {\n      await this.loadViews();\n    },\n\n    getViewUrl(viewId) {\n      if (viewId == null) {\n        return `/project/${this.projectId}/templates`;\n      }\n      return `/project/${this.projectId}/views/${viewId}/templates`;\n    },\n\n    async loadViews() {\n      this.views = (await axios({\n        method: 'get',\n        url: `/api/project/${this.projectId}/views`,\n        responseType: 'json',\n      })).data;\n      this.views.sort((v1, v2) => v1.position - v2.position);\n\n      if (this.viewId != null && !this.views.some((v) => v.id === this.viewId)) {\n        await this.$router.push({ path: `/project/${this.projectId}/templates` });\n      }\n    },\n\n    async closeEditViewDialog() {\n      this.editViewsDialog = false;\n      await this.loadViews();\n    },\n\n    async onWebsocketDataReceived(data) {\n      if (data.project_id !== this.projectId || data.type !== 'update') {\n        return;\n      }\n\n      const template = this.items.find((item) => item.id === data.template_id);\n\n      if (template == null) {\n        return;\n      }\n\n      if (data.task_id !== template.last_task_id) {\n        Object.assign(template.last_task, (await axios({\n          method: 'get',\n          url: `/api/project/${this.projectId}/tasks/${data.task_id}`,\n          responseType: 'json',\n        })).data);\n        template.last_task_id = data.task_id;\n      }\n\n      Object.assign(template.last_task, {\n        ...data,\n        type: undefined,\n      });\n    },\n\n    onTaskCreated(e) {\n      EventBus.$emit('i-show-task', {\n        taskId: e.item.id,\n      });\n      this.itemId = null;\n    },\n\n    showTaskLog(taskId) {\n      EventBus.$emit('i-show-task', {\n        taskId,\n      });\n    },\n\n    createTask(itemId) {\n      this.itemId = itemId;\n      this.newTaskDialog = true;\n    },\n\n    getHeaders() {\n      return [\n        {\n          text: '模板名称',\n          value: 'alias',\n        },\n        {\n          text: '版本',\n          value: 'version',\n          sortable: false,\n        },\n        {\n          text: '状态',\n          value: 'status',\n          sortable: false,\n        },\n        {\n          text: '最近任务',\n          value: 'last_task',\n          sortable: false,\n        },\n        {\n          text: '剧本',\n          value: 'playbook',\n          sortable: false,\n        },\n        {\n          text: '主机清单',\n          value: 'inventory_id',\n          sortable: false,\n        },\n        {\n          text: '运行环境',\n          value: 'environment_id',\n          sortable: false,\n        },\n        {\n          text: '剧本库',\n          value: 'repository_id',\n          sortable: false,\n        },\n        {\n          text: '动作',\n          value: 'actions',\n          sortable: false,\n          width: '0%',\n        },\n      ];\n    },\n\n    getItemsUrl() {\n      return this.viewId == null\n        ? `/api/project/${this.projectId}/templates`\n        : `/api/project/${this.projectId}/views/${this.viewId}/templates`;\n    },\n\n    async loadData() {\n      this.inventory = (await axios({\n        method: 'get',\n        url: `/api/project/${this.projectId}/inventory`,\n        responseType: 'json',\n      })).data;\n\n      this.environment = (await axios({\n        method: 'get',\n        url: `/api/project/${this.projectId}/environment`,\n        responseType: 'json',\n      })).data;\n\n      this.repositories = (await axios({\n        method: 'get',\n        url: `/api/project/${this.projectId}/repositories`,\n        responseType: 'json',\n      })).data;\n    },\n\n    onTableSettingsChange({ headers }) {\n      this.filteredHeaders = headers;\n    },\n  },\n};\n</script>\n"],"sourceRoot":"src/views/project"}]}