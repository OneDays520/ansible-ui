{"remainingRequest":"/Users/lx/go/src/github.com/ansible-semaphore/semaphore/web2/node_modules/thread-loader/dist/cjs.js!/Users/lx/go/src/github.com/ansible-semaphore/semaphore/web2/node_modules/babel-loader/lib/index.js!/Users/lx/go/src/github.com/ansible-semaphore/semaphore/web2/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/lx/go/src/github.com/ansible-semaphore/semaphore/web2/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/lx/go/src/github.com/ansible-semaphore/semaphore/web2/src/components/EditViewsForm.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/lx/go/src/github.com/ansible-semaphore/semaphore/web2/src/components/EditViewsForm.vue","mtime":1638860208857},{"path":"/Users/lx/go/src/github.com/ansible-semaphore/semaphore/web2/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/lx/go/src/github.com/ansible-semaphore/semaphore/web2/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/lx/go/src/github.com/ansible-semaphore/semaphore/web2/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/lx/go/src/github.com/ansible-semaphore/semaphore/web2/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/lx/go/src/github.com/ansible-semaphore/semaphore/web2/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuY29uY2F0IjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmluZCI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmZpbmQtaW5kZXgiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5mb3ItZWFjaCI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5Lm1hcCI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LnJlZHVjZSI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LnNwbGljZSI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm51bWJlci5jb25zdHJ1Y3RvciI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC5rZXlzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvd2ViLmRvbS1jb2xsZWN0aW9ucy5mb3ItZWFjaCI7CmltcG9ydCBfZGVmaW5lUHJvcGVydHkgZnJvbSAiL1VzZXJzL2x4L2dvL3NyYy9naXRodWIuY29tL2Fuc2libGUtc2VtYXBob3JlL3NlbWFwaG9yZS93ZWIyL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9kZWZpbmVQcm9wZXJ0eSI7CmltcG9ydCBfb2JqZWN0U3ByZWFkIGZyb20gIi9Vc2Vycy9seC9nby9zcmMvZ2l0aHViLmNvbS9hbnNpYmxlLXNlbWFwaG9yZS9zZW1hcGhvcmUvd2ViMi9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vb2JqZWN0U3ByZWFkMiI7CmltcG9ydCAicmVnZW5lcmF0b3ItcnVudGltZS9ydW50aW1lIjsKaW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIi9Vc2Vycy9seC9nby9zcmMvZ2l0aHViLmNvbS9hbnNpYmxlLXNlbWFwaG9yZS9zZW1hcGhvcmUvd2ViMi9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vYXN5bmNUb0dlbmVyYXRvciI7Ci8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCmltcG9ydCBkcmFnZ2FibGUgZnJvbSAndnVlZHJhZ2dhYmxlJzsKaW1wb3J0IGF4aW9zIGZyb20gJ2F4aW9zJzsKZXhwb3J0IGRlZmF1bHQgewogIHByb3BzOiB7CiAgICBwcm9qZWN0SWQ6IE51bWJlcgogIH0sCiAgY29tcG9uZW50czogewogICAgZHJhZ2dhYmxlOiBkcmFnZ2FibGUKICB9LAogIGNyZWF0ZWQ6IGZ1bmN0aW9uIGNyZWF0ZWQoKSB7CiAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUoKSB7CiAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dCkgewogICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7CiAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMjsKICAgICAgICAgICAgICByZXR1cm4gYXhpb3MoewogICAgICAgICAgICAgICAgbWV0aG9kOiAnZ2V0JywKICAgICAgICAgICAgICAgIHVybDogIi9hcGkvcHJvamVjdC8iLmNvbmNhdChfdGhpcy5wcm9qZWN0SWQsICIvdmlld3MiKSwKICAgICAgICAgICAgICAgIHJlc3BvbnNlVHlwZTogJ2pzb24nCiAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgICAgX3RoaXMudmlld3MgPSBfY29udGV4dC5zZW50LmRhdGEubWFwKGZ1bmN0aW9uICh2aWV3KSB7CiAgICAgICAgICAgICAgICByZXR1cm4gX29iamVjdFNwcmVhZChfb2JqZWN0U3ByZWFkKHt9LCB2aWV3KSwge30sIHsKICAgICAgICAgICAgICAgICAgYWN0aXZlOiBmYWxzZSwKICAgICAgICAgICAgICAgICAgZGlzYWJsZWQ6IGZhbHNlCiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgX3RoaXMudmlld3Muc29ydChmdW5jdGlvbiAodjEsIHYyKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gdjEucG9zaXRpb24gLSB2Mi5wb3NpdGlvbjsKICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgIGNhc2UgNDoKICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSwgX2NhbGxlZSk7CiAgICB9KSkoKTsKICB9LAogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICB2aWV3czogbnVsbAogICAgfTsKICB9LAogIG1ldGhvZHM6IHsKICAgIG9uRHJhZ0VuZDogZnVuY3Rpb24gb25EcmFnRW5kKCkgewogICAgICB2YXIgX3RoaXMyID0gdGhpczsKCiAgICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUyKCkgewogICAgICAgIHZhciB2aWV3UG9zaXRpb25zOwogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMiQoX2NvbnRleHQyKSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0Mi5wcmV2ID0gX2NvbnRleHQyLm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICB2aWV3UG9zaXRpb25zID0gX3RoaXMyLnZpZXdzLnJlZHVjZShmdW5jdGlvbiAocmV0LCB2aWV3LCBpbmRleCkgewogICAgICAgICAgICAgICAgICBpZiAodmlldy5pZCA8IDAgfHwgdmlldy5wb3NpdGlvbiA9PT0gaW5kZXgpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmV0OwogICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICByZXR1cm4gX29iamVjdFNwcmVhZChfb2JqZWN0U3ByZWFkKHt9LCByZXQpLCB7fSwgX2RlZmluZVByb3BlcnR5KHt9LCB2aWV3LmlkLCBpbmRleCkpOwogICAgICAgICAgICAgICAgfSwge30pOwogICAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSAzOwogICAgICAgICAgICAgICAgcmV0dXJuIGF4aW9zKHsKICAgICAgICAgICAgICAgICAgbWV0aG9kOiAncG9zdCcsCiAgICAgICAgICAgICAgICAgIHVybDogIi9hcGkvcHJvamVjdC8iLmNvbmNhdChfdGhpczIucHJvamVjdElkLCAiL3ZpZXdzL3Bvc2l0aW9ucyIpLAogICAgICAgICAgICAgICAgICByZXNwb25zZVR5cGU6ICdqc29uJywKICAgICAgICAgICAgICAgICAgZGF0YTogdmlld1Bvc2l0aW9ucwogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgICAgICAgIE9iamVjdC5rZXlzKHZpZXdQb3NpdGlvbnMpLm1hcChmdW5jdGlvbiAoaWQpIHsKICAgICAgICAgICAgICAgICAgcmV0dXJuIHBhcnNlSW50KGlkLCAxMCk7CiAgICAgICAgICAgICAgICB9KS5mb3JFYWNoKGZ1bmN0aW9uIChpZCkgewogICAgICAgICAgICAgICAgICB2YXIgdmlldyA9IF90aGlzMi52aWV3cy5maW5kKGZ1bmN0aW9uICh2KSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHYuaWQgPT09IGlkOwogICAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgICAgIHZpZXcucG9zaXRpb24gPSB2aWV3UG9zaXRpb25zW2lkXTsKICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICBjYXNlIDQ6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZTIpOwogICAgICB9KSkoKTsKICAgIH0sCiAgICBzYXZlVmlldzogZnVuY3Rpb24gc2F2ZVZpZXcodmlld0lkKSB7CiAgICAgIHZhciBfdGhpczMgPSB0aGlzOwoKICAgICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTMoKSB7CiAgICAgICAgdmFyIGksIHZpZXcsIG5ld1ZpZXc7CiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUzJChfY29udGV4dDMpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQzLnByZXYgPSBfY29udGV4dDMubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIGkgPSBfdGhpczMudmlld3MuZmluZEluZGV4KGZ1bmN0aW9uICh2KSB7CiAgICAgICAgICAgICAgICAgIHJldHVybiB2LmlkID09PSB2aWV3SWQ7CiAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgICBpZiAoIShpID09PSAtMSkpIHsKICAgICAgICAgICAgICAgICAgX2NvbnRleHQzLm5leHQgPSAzOwogICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQzLmFicnVwdCgicmV0dXJuIik7CgogICAgICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgICAgICAgIHZpZXcgPSBfdGhpczMudmlld3NbaV07CgogICAgICAgICAgICAgICAgaWYgKHZpZXcudGl0bGUpIHsKICAgICAgICAgICAgICAgICAgX2NvbnRleHQzLm5leHQgPSA2OwogICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQzLmFicnVwdCgicmV0dXJuIik7CgogICAgICAgICAgICAgIGNhc2UgNjoKICAgICAgICAgICAgICAgIHZpZXcuZGlzYWJsZWQgPSB0cnVlOwogICAgICAgICAgICAgICAgX2NvbnRleHQzLnByZXYgPSA3OwoKICAgICAgICAgICAgICAgIGlmICghKHZpZXcuaWQgPCAwKSkgewogICAgICAgICAgICAgICAgICBfY29udGV4dDMubmV4dCA9IDE1OwogICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBfY29udGV4dDMubmV4dCA9IDExOwogICAgICAgICAgICAgICAgcmV0dXJuIGF4aW9zKHsKICAgICAgICAgICAgICAgICAgbWV0aG9kOiAncG9zdCcsCiAgICAgICAgICAgICAgICAgIHVybDogIi9hcGkvcHJvamVjdC8iLmNvbmNhdChfdGhpczMucHJvamVjdElkLCAiL3ZpZXdzIiksCiAgICAgICAgICAgICAgICAgIHJlc3BvbnNlVHlwZTogJ2pzb24nLAogICAgICAgICAgICAgICAgICBkYXRhOiB7CiAgICAgICAgICAgICAgICAgICAgcHJvamVjdF9pZDogX3RoaXMzLnByb2plY3RJZCwKICAgICAgICAgICAgICAgICAgICB0aXRsZTogdmlldy50aXRsZSwKICAgICAgICAgICAgICAgICAgICBwb3NpdGlvbjogaQogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgY2FzZSAxMToKICAgICAgICAgICAgICAgIG5ld1ZpZXcgPSBfY29udGV4dDMuc2VudC5kYXRhOwogICAgICAgICAgICAgICAgdmlldy5pZCA9IG5ld1ZpZXcuaWQ7CiAgICAgICAgICAgICAgICBfY29udGV4dDMubmV4dCA9IDE3OwogICAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICAgIGNhc2UgMTU6CiAgICAgICAgICAgICAgICBfY29udGV4dDMubmV4dCA9IDE3OwogICAgICAgICAgICAgICAgcmV0dXJuIGF4aW9zKHsKICAgICAgICAgICAgICAgICAgbWV0aG9kOiAncHV0JywKICAgICAgICAgICAgICAgICAgdXJsOiAiL2FwaS9wcm9qZWN0LyIuY29uY2F0KF90aGlzMy5wcm9qZWN0SWQsICIvdmlld3MvIikuY29uY2F0KHZpZXcuaWQpLAogICAgICAgICAgICAgICAgICByZXNwb25zZVR5cGU6ICdqc29uJywKICAgICAgICAgICAgICAgICAgZGF0YTogewogICAgICAgICAgICAgICAgICAgIGlkOiB2aWV3LmlkLAogICAgICAgICAgICAgICAgICAgIHByb2plY3RfaWQ6IF90aGlzMy5wcm9qZWN0SWQsCiAgICAgICAgICAgICAgICAgICAgdGl0bGU6IHZpZXcudGl0bGUsCiAgICAgICAgICAgICAgICAgICAgcG9zaXRpb246IGkKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgIGNhc2UgMTc6CiAgICAgICAgICAgICAgICBfY29udGV4dDMucHJldiA9IDE3OwogICAgICAgICAgICAgICAgdmlldy5kaXNhYmxlZCA9IGZhbHNlOwogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0My5maW5pc2goMTcpOwoKICAgICAgICAgICAgICBjYXNlIDIwOgogICAgICAgICAgICAgICAgdmlldy5hY3RpdmUgPSBmYWxzZTsKCiAgICAgICAgICAgICAgY2FzZSAyMToKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0My5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlMywgbnVsbCwgW1s3LCwgMTcsIDIwXV0pOwogICAgICB9KSkoKTsKICAgIH0sCiAgICByZXNldFZpZXc6IGZ1bmN0aW9uIHJlc2V0Vmlldyh2aWV3SWQpIHsKICAgICAgdmFyIF90aGlzNCA9IHRoaXM7CgogICAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlNCgpIHsKICAgICAgICB2YXIgdmlldywgb2xkVmlldzsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTQkKF9jb250ZXh0NCkgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDQucHJldiA9IF9jb250ZXh0NC5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgdmlldyA9IF90aGlzNC52aWV3cy5maW5kKGZ1bmN0aW9uICh2KSB7CiAgICAgICAgICAgICAgICAgIHJldHVybiB2LmlkID09PSB2aWV3SWQ7CiAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgICBpZiAoISh2aWV3ID09IG51bGwpKSB7CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0NC5uZXh0ID0gMzsKICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0NC5hYnJ1cHQoInJldHVybiIpOwoKICAgICAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICAgICAgICB2aWV3LmRpc2FibGVkID0gdHJ1ZTsKICAgICAgICAgICAgICAgIF9jb250ZXh0NC5wcmV2ID0gNDsKICAgICAgICAgICAgICAgIF9jb250ZXh0NC5uZXh0ID0gNzsKICAgICAgICAgICAgICAgIHJldHVybiBheGlvcyh7CiAgICAgICAgICAgICAgICAgIG1ldGhvZDogJ2dldCcsCiAgICAgICAgICAgICAgICAgIHVybDogIi9hcGkvcHJvamVjdC8iLmNvbmNhdChfdGhpczQucHJvamVjdElkLCAiL3ZpZXdzLyIpLmNvbmNhdCh2aWV3LmlkKSwKICAgICAgICAgICAgICAgICAgcmVzcG9uc2VUeXBlOiAnanNvbicKICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICBjYXNlIDc6CiAgICAgICAgICAgICAgICBvbGRWaWV3ID0gX2NvbnRleHQ0LnNlbnQuZGF0YTsKICAgICAgICAgICAgICAgIHZpZXcudGl0bGUgPSBvbGRWaWV3LnRpdGxlOwoKICAgICAgICAgICAgICBjYXNlIDk6CiAgICAgICAgICAgICAgICBfY29udGV4dDQucHJldiA9IDk7CiAgICAgICAgICAgICAgICB2aWV3LmRpc2FibGVkID0gZmFsc2U7CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ0LmZpbmlzaCg5KTsKCiAgICAgICAgICAgICAgY2FzZSAxMjoKICAgICAgICAgICAgICAgIHZpZXcuYWN0aXZlID0gZmFsc2U7CgogICAgICAgICAgICAgIGNhc2UgMTM6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDQuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZTQsIG51bGwsIFtbNCwsIDksIDEyXV0pOwogICAgICB9KSkoKTsKICAgIH0sCiAgICBlZGl0VmlldzogZnVuY3Rpb24gZWRpdFZpZXcodmlld0lkKSB7CiAgICAgIHZhciB2aWV3ID0gdGhpcy52aWV3cy5maW5kKGZ1bmN0aW9uICh2KSB7CiAgICAgICAgcmV0dXJuIHYuaWQgPT09IHZpZXdJZDsKICAgICAgfSk7CgogICAgICBpZiAodmlldyA9PSBudWxsKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICB2aWV3LmFjdGl2ZSA9IHRydWU7CiAgICB9LAogICAgcmVtb3ZlVmlldzogZnVuY3Rpb24gcmVtb3ZlVmlldyh2aWV3SWQpIHsKICAgICAgdmFyIF90aGlzNSA9IHRoaXM7CgogICAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlNSgpIHsKICAgICAgICB2YXIgaSwgdmlldzsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTUkKF9jb250ZXh0NSkgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDUucHJldiA9IF9jb250ZXh0NS5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgaSA9IF90aGlzNS52aWV3cy5maW5kSW5kZXgoZnVuY3Rpb24gKHYpIHsKICAgICAgICAgICAgICAgICAgcmV0dXJuIHYuaWQgPT09IHZpZXdJZDsKICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICAgIGlmICghKGkgPT09IC0xKSkgewogICAgICAgICAgICAgICAgICBfY29udGV4dDUubmV4dCA9IDM7CiAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDUuYWJydXB0KCJyZXR1cm4iKTsKCiAgICAgICAgICAgICAgY2FzZSAzOgogICAgICAgICAgICAgICAgdmlldyA9IF90aGlzNS52aWV3c1tpXTsKCiAgICAgICAgICAgICAgICBpZiAoISh2aWV3LmlkID49IDApKSB7CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0NS5uZXh0ID0gMTI7CiAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIHZpZXcuZGlzYWJsZWQgPSB0cnVlOwogICAgICAgICAgICAgICAgX2NvbnRleHQ1LnByZXYgPSA2OwogICAgICAgICAgICAgICAgX2NvbnRleHQ1Lm5leHQgPSA5OwogICAgICAgICAgICAgICAgcmV0dXJuIGF4aW9zKHsKICAgICAgICAgICAgICAgICAgbWV0aG9kOiAnZGVsZXRlJywKICAgICAgICAgICAgICAgICAgdXJsOiAiL2FwaS9wcm9qZWN0LyIuY29uY2F0KF90aGlzNS5wcm9qZWN0SWQsICIvdmlld3MvIikuY29uY2F0KHZpZXcuaWQpLAogICAgICAgICAgICAgICAgICByZXNwb25zZVR5cGU6ICdqc29uJwogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgIGNhc2UgOToKICAgICAgICAgICAgICAgIF9jb250ZXh0NS5wcmV2ID0gOTsKICAgICAgICAgICAgICAgIHZpZXcuZGlzYWJsZWQgPSBmYWxzZTsKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDUuZmluaXNoKDkpOwoKICAgICAgICAgICAgICBjYXNlIDEyOgogICAgICAgICAgICAgICAgX3RoaXM1LnZpZXdzLnNwbGljZShpLCAxKTsKCiAgICAgICAgICAgICAgY2FzZSAxMzoKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0NS5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlNSwgbnVsbCwgW1s2LCwgOSwgMTJdXSk7CiAgICAgIH0pKSgpOwogICAgfSwKICAgIGFkZFZpZXc6IGZ1bmN0aW9uIGFkZFZpZXcoKSB7CiAgICAgIHRoaXMudmlld3MucHVzaCh7CiAgICAgICAgaWQ6IC1NYXRoLnJvdW5kKE1hdGgucmFuZG9tKCkgKiAxMDAwMDAwMCksCiAgICAgICAgdGl0bGU6ICcnLAogICAgICAgIGFjdGl2ZTogdHJ1ZSwKICAgICAgICBkaXNhYmxlZDogZmFsc2UKICAgICAgfSk7CiAgICB9CiAgfQp9Ow=="},{"version":3,"sources":["EditViewsForm.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <div v-if=\"views != null\">\n    <draggable\n        v-if=\"views.length > 0\"\n        :list=\"views\"\n        handle=\".handle6785\"\n        class=\"mb-5\"\n        @end=\"onDragEnd\"\n    >\n      <div v-for=\"(view) in views\" :key=\"view.id\" class=\"d-flex mb-2\">\n        <v-icon class=\"handle6785\" style=\"cursor: move;\">mdi-menu</v-icon>\n        <v-text-field\n            class=\"ml-4 mr-1\"\n            hide-details\n            dense\n            solo\n            :flat=\"!view.active\"\n            v-model=\"view.title\"\n            @focus=\"editView(view.id)\"\n            :disabled=\"view.disabled\"\n        />\n        <v-btn\n            class=\"mt-1\"\n            small\n            icon\n            @click=\"saveView(view.id)\"\n            v-if=\"view.active\"\n            :disabled=\"view.disabled\"\n        >\n          <v-icon small color=\"green\">mdi-check</v-icon>\n        </v-btn>\n        <v-btn\n            class=\"mt-1\"\n            small\n            icon\n            @click=\"resetView(view.id)\"\n            v-if=\"view.active && view.id > 0\"\n            :disabled=\"view.disabled\"\n        >\n          <v-icon small color=\"red\">mdi-close</v-icon>\n        </v-btn>\n\n        <v-btn class=\"ml-4\" icon @click=\"removeView(view.id)\">\n          <v-icon>mdi-close</v-icon>\n        </v-btn>\n      </div>\n    </draggable>\n    <v-alert\n        v-else\n        type=\"info\"\n    >无视图</v-alert>\n    <v-btn @click=\"addView()\" color=\"primary\">添加视图</v-btn>\n  </div>\n</template>\n\n<script>\nimport draggable from 'vuedraggable';\nimport axios from 'axios';\n\nexport default {\n  props: {\n    projectId: Number,\n  },\n\n  components: {\n    draggable,\n  },\n\n  async created() {\n    this.views = (await axios({\n      method: 'get',\n      url: `/api/project/${this.projectId}/views`,\n      responseType: 'json',\n    })).data.map((view) => ({\n      ...view,\n      active: false,\n      disabled: false,\n    }));\n    this.views.sort((v1, v2) => v1.position - v2.position);\n  },\n\n  data() {\n    return {\n      views: null,\n    };\n  },\n  methods: {\n    async onDragEnd() {\n      const viewPositions = this.views.reduce((ret, view, index) => {\n        if (view.id < 0 || view.position === index) {\n          return ret;\n        }\n        return {\n          ...ret,\n          [view.id]: index,\n        };\n      }, {});\n\n      await axios({\n        method: 'post',\n        url: `/api/project/${this.projectId}/views/positions`,\n        responseType: 'json',\n        data: viewPositions,\n      });\n\n      Object.keys(viewPositions).map((id) => parseInt(id, 10)).forEach((id) => {\n        const view = this.views.find((v) => v.id === id);\n        view.position = viewPositions[id];\n      });\n    },\n\n    async saveView(viewId) {\n      const i = this.views.findIndex((v) => v.id === viewId);\n      if (i === -1) {\n        return;\n      }\n\n      const view = this.views[i];\n\n      if (!view.title) {\n        return;\n      }\n\n      view.disabled = true;\n      try {\n        if (view.id < 0) {\n          const newView = (await axios({\n            method: 'post',\n            url: `/api/project/${this.projectId}/views`,\n            responseType: 'json',\n            data: {\n              project_id: this.projectId,\n              title: view.title,\n              position: i,\n            },\n          })).data;\n          view.id = newView.id;\n        } else {\n          await axios({\n            method: 'put',\n            url: `/api/project/${this.projectId}/views/${view.id}`,\n            responseType: 'json',\n            data: {\n              id: view.id,\n              project_id: this.projectId,\n              title: view.title,\n              position: i,\n            },\n          });\n        }\n      } finally {\n        view.disabled = false;\n      }\n      view.active = false;\n    },\n\n    async resetView(viewId) {\n      const view = this.views.find((v) => v.id === viewId);\n      if (view == null) {\n        return;\n      }\n\n      view.disabled = true;\n      try {\n        const oldView = (await axios({\n          method: 'get',\n          url: `/api/project/${this.projectId}/views/${view.id}`,\n          responseType: 'json',\n        })).data;\n        view.title = oldView.title;\n      } finally {\n        view.disabled = false;\n      }\n\n      view.active = false;\n    },\n\n    editView(viewId) {\n      const view = this.views.find((v) => v.id === viewId);\n      if (view == null) {\n        return;\n      }\n      view.active = true;\n    },\n\n    async removeView(viewId) {\n      const i = this.views.findIndex((v) => v.id === viewId);\n      if (i === -1) {\n        return;\n      }\n\n      const view = this.views[i];\n\n      if (view.id >= 0) {\n        view.disabled = true;\n        try {\n          await axios({\n            method: 'delete',\n            url: `/api/project/${this.projectId}/views/${view.id}`,\n            responseType: 'json',\n          });\n        } finally {\n          view.disabled = false;\n        }\n      }\n\n      this.views.splice(i, 1);\n    },\n    addView() {\n      this.views.push({\n        id: -Math.round(Math.random() * 10000000),\n        title: '',\n        active: true,\n        disabled: false,\n      });\n    },\n  },\n};\n</script>\n"],"sourceRoot":"src/components"}]}