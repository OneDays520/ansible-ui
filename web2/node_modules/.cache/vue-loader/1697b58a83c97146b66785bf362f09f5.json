{"remainingRequest":"/Users/lx/go/src/github.com/ansible-semaphore/semaphore/web2/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/lx/go/src/github.com/ansible-semaphore/semaphore/web2/src/views/project/Team.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/lx/go/src/github.com/ansible-semaphore/semaphore/web2/src/views/project/Team.vue","mtime":1638779901604},{"path":"/Users/lx/go/src/github.com/ansible-semaphore/semaphore/web2/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/lx/go/src/github.com/ansible-semaphore/semaphore/web2/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/lx/go/src/github.com/ansible-semaphore/semaphore/web2/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/lx/go/src/github.com/ansible-semaphore/semaphore/web2/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/lx/go/src/github.com/ansible-semaphore/semaphore/web2/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBJdGVtTGlzdFBhZ2VCYXNlIGZyb20gJ0AvY29tcG9uZW50cy9JdGVtTGlzdFBhZ2VCYXNlJzsKaW1wb3J0IFRlYW1NZW1iZXJGb3JtIGZyb20gJ0AvY29tcG9uZW50cy9UZWFtTWVtYmVyRm9ybS52dWUnOwppbXBvcnQgYXhpb3MgZnJvbSAnYXhpb3MnOwoKZXhwb3J0IGRlZmF1bHQgewogIGNvbXBvbmVudHM6IHsgVGVhbU1lbWJlckZvcm0gfSwKICBtaXhpbnM6IFtJdGVtTGlzdFBhZ2VCYXNlXSwKICBtZXRob2RzOiB7CiAgICBhc3luYyBncmFudEFkbWluKHVzZXJJZCkgewogICAgICBhd2FpdCBheGlvcyh7CiAgICAgICAgbWV0aG9kOiAncG9zdCcsCiAgICAgICAgdXJsOiBgL2FwaS9wcm9qZWN0LyR7dGhpcy5wcm9qZWN0SWR9L3VzZXJzLyR7dXNlcklkfS9hZG1pbmAsCiAgICAgICAgcmVzcG9uc2VUeXBlOiAnanNvbicsCiAgICAgIH0pOwogICAgICBhd2FpdCB0aGlzLmxvYWRJdGVtcygpOwogICAgfSwKICAgIGFzeW5jIHJlZnVzZUFkbWluKHVzZXJJZCkgewogICAgICBhd2FpdCBheGlvcyh7CiAgICAgICAgbWV0aG9kOiAnZGVsZXRlJywKICAgICAgICB1cmw6IGAvYXBpL3Byb2plY3QvJHt0aGlzLnByb2plY3RJZH0vdXNlcnMvJHt1c2VySWR9L2FkbWluYCwKICAgICAgICByZXNwb25zZVR5cGU6ICdqc29uJywKICAgICAgfSk7CiAgICAgIGF3YWl0IHRoaXMubG9hZEl0ZW1zKCk7CiAgICB9LAogICAgZ2V0SGVhZGVycygpIHsKICAgICAgcmV0dXJuIFsKICAgICAgICB7CiAgICAgICAgICB0ZXh0OiAnTmFtZScsCiAgICAgICAgICB2YWx1ZTogJ25hbWUnLAogICAgICAgICAgd2lkdGg6ICc1MCUnLAogICAgICAgIH0sCiAgICAgICAgewogICAgICAgICAgdGV4dDogJ1VzZXJuYW1lJywKICAgICAgICAgIHZhbHVlOiAndXNlcm5hbWUnLAogICAgICAgIH0sCiAgICAgICAgewogICAgICAgICAgdGV4dDogJ0VtYWlsJywKICAgICAgICAgIHZhbHVlOiAnZW1haWwnLAogICAgICAgICAgd2lkdGg6ICc1MCUnLAogICAgICAgIH0sCiAgICAgICAgewogICAgICAgICAgdGV4dDogJ0FkbWluJywKICAgICAgICAgIHZhbHVlOiAnYWRtaW4nLAogICAgICAgIH0sCiAgICAgICAgewogICAgICAgICAgdGV4dDogJ0FjdGlvbnMnLAogICAgICAgICAgdmFsdWU6ICdhY3Rpb25zJywKICAgICAgICAgIHNvcnRhYmxlOiBmYWxzZSwKICAgICAgICB9XTsKICAgIH0sCiAgICBnZXRTaW5nbGVJdGVtVXJsKCkgewogICAgICByZXR1cm4gYC9hcGkvcHJvamVjdC8ke3RoaXMucHJvamVjdElkfS91c2Vycy8ke3RoaXMuaXRlbUlkfWA7CiAgICB9LAogICAgZ2V0SXRlbXNVcmwoKSB7CiAgICAgIHJldHVybiBgL2FwaS9wcm9qZWN0LyR7dGhpcy5wcm9qZWN0SWR9L3VzZXJzP3NvcnQ9bmFtZSZvcmRlcj1hc2NgOwogICAgfSwKICAgIGdldEV2ZW50TmFtZSgpIHsKICAgICAgcmV0dXJuICdpLXJlcG9zaXRvcmllcyc7CiAgICB9LAogICAgaXNVc2VyQWRtaW4oKSB7CiAgICAgIHJldHVybiAodGhpcy5pdGVtcy5maW5kKCh4KSA9PiB4LmlkID09PSB0aGlzLnVzZXJJZCkgfHwge30pLmFkbWluOwogICAgfSwKICB9LAp9Owo="},{"version":3,"sources":["Team.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAoEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Team.vue","sourceRoot":"src/views/project","sourcesContent":["<template xmlns:v-slot=\"http://www.w3.org/1999/XSL/Transform\">\n  <div v-if=\"items != null\">\n    <EditDialog\n      v-model=\"editDialog\"\n      :save-button-text=\"(this.itemId === 'new' ? 'Link' : 'Save')\"\n      :title=\"(this.itemId === 'new' ? 'New' : 'Edit') + ' Team Member'\"\n      @save=\"loadItems()\"\n    >\n      <template v-slot:form=\"{ onSave, onError, needSave, needReset }\">\n        <TeamMemberForm\n          :project-id=\"projectId\"\n          :item-id=\"itemId\"\n          @save=\"onSave\"\n          @error=\"onError\"\n          :need-save=\"needSave\"\n          :need-reset=\"needReset\"\n        />\n      </template>\n    </EditDialog>\n\n    <YesNoDialog\n      title=\"Delete team member\"\n      text=\"Are you really want to delete the team member?\"\n      v-model=\"deleteItemDialog\"\n      @yes=\"deleteItem(itemId)\"\n    />\n\n    <v-toolbar flat color=\"white\">\n      <v-app-bar-nav-icon @click=\"showDrawer()\"></v-app-bar-nav-icon>\n      <v-toolbar-title>Team</v-toolbar-title>\n      <v-spacer></v-spacer>\n      <v-btn\n        color=\"primary\"\n        @click=\"editItem('new')\"\n      >New Team Member</v-btn>\n    </v-toolbar>\n\n    <v-data-table\n      :headers=\"headers\"\n      :items=\"items\"\n      hide-default-footer\n      class=\"mt-4\"\n      :items-per-page=\"Number.MAX_VALUE\"\n    >\n      <template v-slot:item.admin=\"{ item }\">\n\n        <v-switch\n          v-model=\"item.admin\"\n          inset\n          :disabled=\"!isUserAdmin()\"\n          @change=\"item.admin ? grantAdmin(item.id) : refuseAdmin(item.id)\"\n        ></v-switch>\n      </template>\n\n      <template v-slot:item.actions=\"{ item }\">\n        <v-btn\n          icon\n          :disabled=\"!isUserAdmin()\"\n          @click=\"askDeleteItem(item.id)\"\n        >\n          <v-icon>mdi-delete</v-icon>\n        </v-btn>\n      </template>\n    </v-data-table>\n  </div>\n\n</template>\n<script>\nimport ItemListPageBase from '@/components/ItemListPageBase';\nimport TeamMemberForm from '@/components/TeamMemberForm.vue';\nimport axios from 'axios';\n\nexport default {\n  components: { TeamMemberForm },\n  mixins: [ItemListPageBase],\n  methods: {\n    async grantAdmin(userId) {\n      await axios({\n        method: 'post',\n        url: `/api/project/${this.projectId}/users/${userId}/admin`,\n        responseType: 'json',\n      });\n      await this.loadItems();\n    },\n    async refuseAdmin(userId) {\n      await axios({\n        method: 'delete',\n        url: `/api/project/${this.projectId}/users/${userId}/admin`,\n        responseType: 'json',\n      });\n      await this.loadItems();\n    },\n    getHeaders() {\n      return [\n        {\n          text: 'Name',\n          value: 'name',\n          width: '50%',\n        },\n        {\n          text: 'Username',\n          value: 'username',\n        },\n        {\n          text: 'Email',\n          value: 'email',\n          width: '50%',\n        },\n        {\n          text: 'Admin',\n          value: 'admin',\n        },\n        {\n          text: 'Actions',\n          value: 'actions',\n          sortable: false,\n        }];\n    },\n    getSingleItemUrl() {\n      return `/api/project/${this.projectId}/users/${this.itemId}`;\n    },\n    getItemsUrl() {\n      return `/api/project/${this.projectId}/users?sort=name&order=asc`;\n    },\n    getEventName() {\n      return 'i-repositories';\n    },\n    isUserAdmin() {\n      return (this.items.find((x) => x.id === this.userId) || {}).admin;\n    },\n  },\n};\n</script>\n"]}]}