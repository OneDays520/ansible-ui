{"remainingRequest":"/Users/lx/go/src/github.com/ansible-semaphore/semaphore/web2/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/lx/go/src/github.com/ansible-semaphore/semaphore/web2/src/components/IndeterminateProgressCircular.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/lx/go/src/github.com/ansible-semaphore/semaphore/web2/src/components/IndeterminateProgressCircular.vue","mtime":1638779901599},{"path":"/Users/lx/go/src/github.com/ansible-semaphore/semaphore/web2/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/lx/go/src/github.com/ansible-semaphore/semaphore/web2/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/lx/go/src/github.com/ansible-semaphore/semaphore/web2/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/lx/go/src/github.com/ansible-semaphore/semaphore/web2/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/lx/go/src/github.com/ansible-semaphore/semaphore/web2/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBMaXN0ZW5hYmxlIGZyb20gJ0AvbGliL0xpc3RlbmFibGUnOwoKY2xhc3MgSW5kZXRlcm1pbmF0ZVRpbWVyIGV4dGVuZHMgTGlzdGVuYWJsZSB7CiAgY29uc3RydWN0b3IoKSB7CiAgICBzdXBlcigpOwogICAgdGhpcy5kaXJlY3Rpb24gPSAxOwogICAgdGhpcy52YWx1ZSA9IDA7CiAgICB0aGlzLnJvdGF0ZSA9IDA7CiAgfQoKICBzdGFydCgpIHsKICAgIGNvbnN0IFNURVAgPSAxOwogICAgY29uc3Qgc2VsZiA9IHRoaXM7CgogICAgc2VsZi52YWx1ZVRpbWVyID0gc2V0SW50ZXJ2YWwoKCkgPT4gewogICAgICBpZiAoc2VsZi5kaXJlY3Rpb24gPT09IDEgJiYgc2VsZi52YWx1ZSA+PSAxMDApIHsKICAgICAgICBzZWxmLmRpcmVjdGlvbiA9IC0xOwogICAgICB9IGVsc2UgaWYgKHNlbGYuZGlyZWN0aW9uID09PSAtMSAmJiBzZWxmLnZhbHVlIDw9IDApIHsKICAgICAgICBzZWxmLmRpcmVjdGlvbiA9IDE7CiAgICAgIH0KICAgICAgaWYgKHNlbGYuZGlyZWN0aW9uID09PSAxKSB7CiAgICAgICAgc2VsZi5yb3RhdGUgKz0gU1RFUDsKICAgICAgICBzZWxmLnZhbHVlICs9IFNURVA7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgc2VsZi5yb3RhdGUgKz0gU1RFUCAqIDU7CiAgICAgICAgc2VsZi52YWx1ZSArPSAtU1RFUDsKICAgICAgfQoKICAgICAgaWYgKHNlbGYucm90YXRlID4gMzYwKSB7CiAgICAgICAgc2VsZi5yb3RhdGUgJT0gMzYwOwogICAgICB9CgogICAgICBzZWxmLmNhbGxMaXN0ZW5lcnMoewogICAgICAgIHZhbHVlOiBzZWxmLnZhbHVlLAogICAgICAgIHJvdGF0ZTogc2VsZi5yb3RhdGUsCiAgICAgIH0pOwogICAgfSwgNTApOwogIH0KCiAgc3RvcCgpIHsKICAgIGNsZWFySW50ZXJ2YWwodGhpcy52YWx1ZVRpbWVyKTsKICB9CgogIGFkZExpc3RlbmVyKGNhbGxiYWNrKSB7CiAgICBpZiAoIXRoaXMuaGFzTGlzdGVuZXJzKCkpIHsKICAgICAgdGhpcy5zdGFydCgpOwogICAgfQogICAgcmV0dXJuIHN1cGVyLmFkZExpc3RlbmVyKGNhbGxiYWNrKTsKICB9CgogIHJlbW92ZUxpc3RlbmVyKGlkKSB7CiAgICBzdXBlci5yZW1vdmVMaXN0ZW5lcihpZCk7CiAgICBpZiAoIXRoaXMuaGFzTGlzdGVuZXJzKCkpIHsKICAgICAgdGhpcy5zdG9wKCk7CiAgICB9CiAgfQp9Cgpjb25zdCBpbmRldGVybWluYXRlVGltZXIgPSBuZXcgSW5kZXRlcm1pbmF0ZVRpbWVyKCk7CgpleHBvcnQgZGVmYXVsdCB7CiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIHZhbHVlOiBudWxsLAogICAgICByb3RhdGU6IG51bGwsCiAgICAgIGxpc3RlbmVySWQ6IG51bGwsCiAgICB9OwogIH0sCgogIG1vdW50ZWQoKSB7CiAgICB0aGlzLnZhbHVlID0gaW5kZXRlcm1pbmF0ZVRpbWVyLnZhbHVlOwogICAgdGhpcy5yb3RhdGUgPSBpbmRldGVybWluYXRlVGltZXIucm90YXRlOwogICAgdGhpcy5saXN0ZW5lcklkID0gaW5kZXRlcm1pbmF0ZVRpbWVyLmFkZExpc3RlbmVyKCh7IHZhbHVlLCByb3RhdGUgfSkgPT4gewogICAgICB0aGlzLnZhbHVlID0gdmFsdWU7CiAgICAgIHRoaXMucm90YXRlID0gcm90YXRlOwogICAgfSk7CiAgfSwKCiAgYmVmb3JlRGVzdHJveSgpIHsKICAgIGluZGV0ZXJtaW5hdGVUaW1lci5yZW1vdmVMaXN0ZW5lcih0aGlzLmxpc3RlbmVySWQpOwogIH0sCn07Cg=="},{"version":3,"sources":["IndeterminateProgressCircular.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;AAmBA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA","file":"IndeterminateProgressCircular.vue","sourceRoot":"src/components","sourcesContent":["<template>\n  <v-progress-circular\n    color=\"white\"\n    class=\"indeterminate-progress-circular mr-2\"\n    size=\"20\"\n    width=\"10\"\n    :rotate=\"rotate\"\n    :value=\"value\"\n  >\n  </v-progress-circular>\n</template>\n<style lang=\"scss\">\n  .indeterminate-progress-circular {\n    .v-progress-circular__overlay {\n      transition: 0s !important;\n    }\n  }\n</style>\n<script>\nimport Listenable from '@/lib/Listenable';\n\nclass IndeterminateTimer extends Listenable {\n  constructor() {\n    super();\n    this.direction = 1;\n    this.value = 0;\n    this.rotate = 0;\n  }\n\n  start() {\n    const STEP = 1;\n    const self = this;\n\n    self.valueTimer = setInterval(() => {\n      if (self.direction === 1 && self.value >= 100) {\n        self.direction = -1;\n      } else if (self.direction === -1 && self.value <= 0) {\n        self.direction = 1;\n      }\n      if (self.direction === 1) {\n        self.rotate += STEP;\n        self.value += STEP;\n      } else {\n        self.rotate += STEP * 5;\n        self.value += -STEP;\n      }\n\n      if (self.rotate > 360) {\n        self.rotate %= 360;\n      }\n\n      self.callListeners({\n        value: self.value,\n        rotate: self.rotate,\n      });\n    }, 50);\n  }\n\n  stop() {\n    clearInterval(this.valueTimer);\n  }\n\n  addListener(callback) {\n    if (!this.hasListeners()) {\n      this.start();\n    }\n    return super.addListener(callback);\n  }\n\n  removeListener(id) {\n    super.removeListener(id);\n    if (!this.hasListeners()) {\n      this.stop();\n    }\n  }\n}\n\nconst indeterminateTimer = new IndeterminateTimer();\n\nexport default {\n  data() {\n    return {\n      value: null,\n      rotate: null,\n      listenerId: null,\n    };\n  },\n\n  mounted() {\n    this.value = indeterminateTimer.value;\n    this.rotate = indeterminateTimer.rotate;\n    this.listenerId = indeterminateTimer.addListener(({ value, rotate }) => {\n      this.value = value;\n      this.rotate = rotate;\n    });\n  },\n\n  beforeDestroy() {\n    indeterminateTimer.removeListener(this.listenerId);\n  },\n};\n</script>\n"]}]}